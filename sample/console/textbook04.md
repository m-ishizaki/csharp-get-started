# コンソールアプリを作ってみよう

### 改善ポイント
1. 実はアプリを実行して最初に答えが表示されてしまっています。これを消しましょう。
1. プレイヤーが数字を入力した場合に「数値が入力されました」と表示されますが、プログラムとしては大きな情報ですが、プレイヤーに伝える必要はなさそうです。これを消しましょう。
1. むしろ、プレイヤーが入力する際に「数字を入力しなければならない」とわかる方が新設そうです。「数字を入力: 」と表示してみましょう。
1. プレイヤーの入力後に、プレイヤーの入力した文字列を表示しています。この情報もプレイヤーに伝える必要はなさそうです。これも消しましょう。
1. プレイヤーが正解を入力した場合の ```input == answe``` ですが、実はこれは繰り返し処理の ```while (input != answer)``` の裏返しです。```while(...) {  }``` の繰り返しが終わった後に「正解！\n終了するには何かキーを押してください...」と表示するコードを書けば同じことになります。プログラムコードはより短く、より ```if(...)``` などが少ない方が良いコードとされます。  
1. ```while(...) {  }``` の中の ```if(...) {  }``` はどれか一つの場所が実行されれば、その回の繰り返しでは後続の処理は実行する必要がありません。例えば ```if (input > answer)``` であれば ```if (input < answer)``` のことは考える必要はありません。そういった場合は、```if(...) {  }``` の中に ```continue;``` と書くと、その場で次の繰り返し処理に移ります。そういった形で、後続の処理の実行が不要だと分かったタイミングで、後続の処理を行わない機能を使うことが良いコードとされます。  

**変更後 Program.cs 例**
```cs
using System;

namespace ConsoleApp
{
    class Program
    {
        static void Main(string[] args)
        {
            var answer = new System.Random().Next(1, 9);
            int input = default;
            Console.WriteLine("数字あて");
            while (input != answer)
            {
                Console.Write("数字を入力: ");
                var line = Console.ReadLine();
                if (!int.TryParse(line, out input))
                {
                    Console.WriteLine("数字を入力してください");
                    continue;
                }
                if (input < 1 || input > 9)
                {
                    Console.WriteLine("1-9 の数字を 1 文字入力してください");
                    continue;
                }
                if (input > answer)
                {
                    Console.WriteLine("答えはもっと小さい値です");
                    continue;
                }
                if (input < answer)
                {
                    Console.WriteLine("答えはもっと大きい値です");
                    continue;
                }
            }
            Console.Write("正解！\n終了するには何かキーを押してください... ");
            Console.ReadKey();
        }
    }
}
```
おめでとうございます！ これで数当てゲームの完成です。  
簡単なものではありますが、立派なアプリです。C# でアプリを作った経験者になりました。これから素晴らしい C# エンジニア生活を送ってください！

## 自習 - アプリの改善
今回作った数当てゲームはまだ不親切な部分があります。C# の学習としてぜひ自分で機能を追加してみてください。  

### 機能の例

- 正解を当てるまでにかかった回数を数えて表示する機能
- 1 ゲームごとに終了するのではなく、連続で遊べる機能
- 複数の答えを同時に当てていく機能
- 数字でなく単語を当てる機能

**あなたに、素晴らしい C# エンジニアライフを！**

<hr />

[< 前へ](./textbook02.md)

[C# でアプリを作るへ](../../textbook/practice.md)